{"ast":null,"code":"var _s3 = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { api } from '../../service/api';\nexport const queryPokemons = () => {\n  _s3();\n\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  const [page, setPage] = useState(1);\n  const [paginatedData, setPaginated] = useState();\n  const [allData, setAll] = useState([]);\n\n  const getAll = () => {\n    _s();\n\n    const {\n      data,\n      error\n    } = useQuery('pokemons/all', () => api.get(`/pokemon/?limit=500&offset=500`).then(res => res.data), {\n      keepPreviousData: true\n    });\n    if (error || !data) return false;\n    return setAll(data === null || data === void 0 ? void 0 : data.results);\n  };\n\n  _s(getAll, \"jnKEiAG78WqeE0AS5/bjUCg4uK4=\", false, function () {\n    return [useQuery];\n  });\n\n  const getPaginated = function () {\n    _s2();\n\n    let pageParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : page;\n    const {\n      data,\n      error\n    } = useQuery('pokemons/paginated', () => api.get(`/pokemon/?limit=20&offset=${20 * page}`).then(res => res.data), {\n      keepPreviousData: true\n    });\n    if (error || !data) return false;\n\n    if (!allData) {\n      setAll([...allData, ...data.results]);\n    }\n\n    return setPaginated(data);\n  };\n\n  _s2(getPaginated, \"jnKEiAG78WqeE0AS5/bjUCg4uK4=\", false, function () {\n    return [useQuery];\n  });\n\n  const nextPage = () => setPage(page + 1);\n\n  const previousPage = () => setPage(page + 1);\n\n  return {\n    data: {\n      allData: allData,\n      paginated: {\n        paginatedData,\n        page\n      }\n    },\n    actions: {\n      getPaginated,\n      nextPage,\n      previousPage,\n      getAll\n    }\n  };\n};\n\n_s3(queryPokemons, \"LhmaEOgzZSQi2lasZPaABGzHGPY=\");","map":{"version":3,"sources":["/Users/santiagosouza/poc-context-struct/src/hooks/query/queryPokemons.ts"],"names":["useState","useQuery","api","queryPokemons","page","setPage","paginatedData","setPaginated","allData","setAll","getAll","data","error","get","then","res","keepPreviousData","results","getPaginated","pageParam","nextPage","previousPage","paginated","actions"],"mappings":";;AAAA,SAAgBA,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,GAAT,QAAoB,mBAApB;AA8BA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAAA;;AAAA;AAAA;;AACjC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,CAAD,CAAhC;AAEA,QAAM,CAACM,aAAD,EAAgBC,YAAhB,IAAgCP,QAAQ,EAA9C;AACA,QAAM,CAACQ,OAAD,EAAUC,MAAV,IAAoBT,QAAQ,CAAc,EAAd,CAAlC;;AAEA,QAAMU,MAAM,GAAG,MAAM;AAAA;;AACnB,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBX,QAAQ,CAC9B,cAD8B,EAE9B,MACEC,GAAG,CACAW,GADH,CAC2B,gCAD3B,EAEGC,IAFH,CAESC,GAAD,IAASA,GAAG,CAACJ,IAFrB,CAH4B,EAM9B;AACEK,MAAAA,gBAAgB,EAAE;AADpB,KAN8B,CAAhC;AAUA,QAAIJ,KAAK,IAAI,CAACD,IAAd,EAAoB,OAAO,KAAP;AACpB,WAAOF,MAAM,CAACE,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEM,OAAP,CAAb;AACD,GAbD;;AANiC,KAM3BP,MAN2B;AAAA,YAOPT,QAPO;AAAA;;AAqBjC,QAAMiB,YAAY,GAAG,YAA8B;AAAA;;AAAA,QAA7BC,SAA6B,uEAATf,IAAS;AACjD,UAAM;AAAEO,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBX,QAAQ,CAC9B,oBAD8B,EAE9B,MACEC,GAAG,CACAW,GADH,CAC2B,6BAA4B,KAAKT,IAAK,EADjE,EAEGU,IAFH,CAESC,GAAD,IAASA,GAAG,CAACJ,IAFrB,CAH4B,EAM9B;AACEK,MAAAA,gBAAgB,EAAE;AADpB,KAN8B,CAAhC;AAUA,QAAIJ,KAAK,IAAI,CAACD,IAAd,EAAoB,OAAO,KAAP;;AAEpB,QAAI,CAACH,OAAL,EAAc;AACZC,MAAAA,MAAM,CAAC,CAAC,GAAGD,OAAJ,EAAa,GAAGG,IAAI,CAACM,OAArB,CAAD,CAAN;AACD;;AACD,WAAOV,YAAY,CAACI,IAAD,CAAnB;AACD,GAjBD;;AArBiC,MAqB3BO,YArB2B;AAAA,YAsBPjB,QAtBO;AAAA;;AAwCjC,QAAMmB,QAAQ,GAAG,MAAMf,OAAO,CAACD,IAAI,GAAG,CAAR,CAA9B;;AACA,QAAMiB,YAAY,GAAG,MAAMhB,OAAO,CAACD,IAAI,GAAG,CAAR,CAAlC;;AAEA,SAAO;AACLO,IAAAA,IAAI,EAAE;AACJH,MAAAA,OAAO,EAAEA,OADL;AAEJc,MAAAA,SAAS,EAAE;AACThB,QAAAA,aADS;AAETF,QAAAA;AAFS;AAFP,KADD;AAQLmB,IAAAA,OAAO,EAAE;AACPL,MAAAA,YADO;AAEPE,MAAAA,QAFO;AAGPC,MAAAA,YAHO;AAKPX,MAAAA;AALO;AARJ,GAAP;AAgBD,CA3DM;;IAAMP,a","sourcesContent":["import React, { useState } from 'react'\nimport { useQuery } from 'react-query'\nimport { api } from '../../service/api'\n\nexport type ReturnOBJ = {\n  name: string\n  url: string\n}\n\nexport interface PaginatedResponse {\n  count: number\n  next?: string\n  previous?: string\n  results: ReturnOBJ[]\n}\n\nexport interface QueryPokemonsTypes {\n  data: {\n    allData?: ReturnOBJ[]\n    paginated: {\n      paginatedData?: PaginatedResponse\n      page: number\n    }\n  }\n  actions: {\n    getPaginated: (pageParam?: number) => void\n    nextPage: () => void\n    previousPage: () => void\n    getAll: () => void\n  }\n}\n\nexport const queryPokemons = () => {\n  const [page, setPage] = useState(1)\n\n  const [paginatedData, setPaginated] = useState<PaginatedResponse>()\n  const [allData, setAll] = useState<ReturnOBJ[]>([])\n\n  const getAll = () => {\n    const { data, error } = useQuery(\n      'pokemons/all',\n      () =>\n        api\n          .get<PaginatedResponse>(`/pokemon/?limit=500&offset=500`)\n          .then((res) => res.data),\n      {\n        keepPreviousData: true\n      }\n    )\n    if (error || !data) return false\n    return setAll(data?.results)\n  }\n\n  const getPaginated = (pageParam: number = page) => {\n    const { data, error } = useQuery(\n      'pokemons/paginated',\n      () =>\n        api\n          .get<PaginatedResponse>(`/pokemon/?limit=20&offset=${20 * page}`)\n          .then((res) => res.data),\n      {\n        keepPreviousData: true\n      }\n    )\n    if (error || !data) return false\n\n    if (!allData) {\n      setAll([...allData, ...data.results])\n    }\n    return setPaginated(data)\n  }\n\n  const nextPage = () => setPage(page + 1)\n  const previousPage = () => setPage(page + 1)\n\n  return {\n    data: {\n      allData: allData,\n      paginated: {\n        paginatedData,\n        page\n      }\n    },\n    actions: {\n      getPaginated,\n      nextPage,\n      previousPage,\n\n      getAll\n    }\n  } as QueryPokemonsTypes\n}\n"]},"metadata":{},"sourceType":"module"}